{% extends "layouts/base.html" %}

{% block title %} Chart JS {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<div class="page-inner">
    <h4 class="page-title">유저</h4>
<!--        <div class="page-category">Simple yet flexible JavaScript charting for designers & developers. Please checkout their <a href="https://www.chartjs.org/" target="_blank">full documentation</a>.</div>-->
    <div class="row">
        <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">가입자</div>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="mmbr_join_cnt"></canvas>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>


{% endblock content %}

{% block javascripts %}

<!--<script src="/static/assets/js/test2.js"></script>-->
<script src="/static/assets/js/colors.js"></script>          // 색깔
<script src="/static/assets/js/charts_setting.js"></script>  // charts js 설정
<script>


/////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////// 데이터 /////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////


    <!--데이터 받기 -->
    var temp = "{{users_list}}";

    <!--데이터 수정 -->
    var temp2 = temp.replace(/&#39;/g, "\"");

    <!-- 수정된 데이터 배열에 담기 -->
    var data = JSON.parse(temp2);

    console.log(data);


    // 카테고리 매출 //
    var mmbr_join_cnt = document.getElementById('mmbr_join_cnt').getContext('2d');
    var day_join_naver  = Object.values(data[1]).splice(1,11);
    var day_join_kakao  = Object.values(data[3]).splice(1,11);
    var day_join_gnrl   = Object.values(data[2]).splice(1,11);









/////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////// 객체 ///////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////


    // 카테고리 매출 //
   var myMmbr_join_cnt = new Chart(mmbr_join_cnt, {
			type: 'bar',
			data: {
				labels: ["-1day", "-2day", "-3day", "-4day", "-5day", "-6day", "-7day", "-8day", "-9day", "-10day"],
				datasets : [{
					label: "카카오",
					backgroundColor: '#59d05d',
					borderColor: '#59d05d',
					data: [day_join_kakao[10],day_join_kakao[9],day_join_kakao[8],day_join_kakao[7],day_join_kakao[6]
                          ,day_join_kakao[5],day_join_kakao[4],day_join_kakao[3],day_join_kakao[2],day_join_kakao[1]],
				},{
					label: "네이버",
					backgroundColor: '#fdaf4b',
					borderColor: '#fdaf4b',
					data: [day_join_naver[10],day_join_naver[9],day_join_naver[8],day_join_naver[7],day_join_naver[6]
                          ,day_join_naver[5],day_join_naver[4],day_join_naver[3],day_join_naver[2],day_join_naver[1]],
				}, {
					label: "일반",
					backgroundColor: '#177dff',
					borderColor: '#177dff',
					data: [day_join_gnrl[10],day_join_gnrl[9],day_join_gnrl[8],day_join_gnrl[7],day_join_gnrl[6]
                          ,day_join_gnrl[5],day_join_gnrl[4],day_join_gnrl[3],day_join_gnrl[2],day_join_gnrl[1]],
				}],
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				legend: {
					position : 'bottom'
				},
				title: {
					display: true,
					text: 'Traffic Stats'
				},
				tooltips: {
					mode: 'index',
					intersect: false
				},
				responsive: true,
				scales: {
					xAxes: [{
						stacked: true,
					}],
					yAxes: [{
						stacked: true
					}]
				}
			}
		});



</script>

{% endblock javascripts %}