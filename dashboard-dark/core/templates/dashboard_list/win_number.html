{% extends "layouts/base.html" %}

{% block title %} Chart JS {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

<!-- #################################################### -->
<!-- static/assets/css/atlantis.css 파일 class 색깔 정하기 -->
<!-- #################################################### -->
{% block content %}

<div class="page-inner">
	<div class="page-header">
            <h4 class="page-title">Forms</h4>
            <ul class="breadcrumbs">
                <li class="nav-home">
                    <a href="#">
                        <i class="flaticon-home"></i>
                    </a>
                </li>
                <li class="separator">
                    <i class="flaticon-right-arrow"></i>
                </li>
                <li class="nav-item">
                    <a href="#">Forms</a>
                </li>
                <li class="separator">
                    <i class="flaticon-right-arrow"></i>
                </li>
                <li class="nav-item">
                    <a href="#">Basic Form</a>
                </li>
            </ul>
        </div>
    <!-- <div class="page-category">
    	<a href="https://www.chartjs.org/" target="_blank">
    		full documentation
    	</a>
    </div> -->
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title">
                    	Win List
                    </h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table id="basic-datatables" 
                               class="display table table-striped table-hover" >
                            <thead>
                                <tr>
                                    <th>seq</th>
                                    <th>n1</th>
                                    <th>n2</th>
                                    <th>n3</th>
                                    <th>n4</th>
                                    <th>n5</th>
                                    <th>n6</th>
                                </tr>
                            </thead>
                            <tbody>
                            	{% for winlotto in winlottos %} 
                            	<tr>
		                            <td>{{winlotto.seq}}</td>
			                        <td>{{winlotto.n1}}</td>
			                        <td>{{winlotto.n2}}</td>
			                        <td>{{winlotto.n3}}</td>
			                        <td>{{winlotto.n4}}</td>
			                        <td>{{winlotto.n5}}</td>
			                        <td>{{winlotto.n6}}</td>
			                    </tr>
			                    {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">tap</div>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="barChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Rate of numbers </div>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="pieChart" style="width: 50%; height: 50%"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Radar Chart</div>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Bubble Chart</div>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="bubbleChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block javascripts %}

<script>

    ////////////////////////////////////////////
    /////////////// 버튼 활성화 /////////////////
    ////////////////////////////////////////////
    
    $(function(){
        $("#pt30").on('input', function(){
            if($("#pt30").val()=='')
                $("#TestBtn").attr("disabled",true);
            else
                $("#TestBtn").attr("disabled",false);
            });
    });

    /////////////////////////////////////////////
    /////////////// 테이블 형식 //////////////////
    ////////////////////////////////////////////
    
    $(document).ready(function(){
            $('#basic-datatables').DataTable({
                // 표시 건수기능 숨기기
                lengthChange: true,
                // 검색 기능 숨기기
                searching: true,
                // 정렬 기능 숨기기
                ordering: true,
                // 정보 표시 숨기기
                info: true,
                // 페이징 기능 숨기기
                paging: true
            });
        });

	////////////////////////////////////////////
	////////////////////////////////////////////

	// 데이터 받기
	var temp = "{{winlottos}}";

	// 데이터 정제
	var temp2 = temp.replace(/&#x27;/g, "\"");

	// Object로 변환 
	var data = JSON.parse(temp2);	

	// 데이터 뽑기
	var lotto_data = Object.values(data[0]).splice(0,11);

	var barChart = document.getElementById('barChart').getContext('2d');
	var pieChart = document.getElementById('pieChart').getContext('2d');
	var radarChart = document.getElementById('radarChart').getContext('2d');
	var bubbleChart = document.getElementById('bubbleChart').getContext('2d');

	var myBarChart = new Chart(barChart, {
				type: 'bar',
				data: {
					labels: ["Num1", "Num2", "Num3", "Num4", "Num5", "Num6"],
					datasets : [{
						label: "Number",
						backgroundColor: 'rgb(23, 125, 255)',
						borderColor: 'rgb(23, 125, 255)',
						data: [lotto_data[1],lotto_data[2],lotto_data[3],lotto_data[4]
						       ,lotto_data[5],lotto_data[6]],
					}],
				},
				options: {
					responsive: true,
					maintainAspectRatio: false,
					scales: {
						yAxes: [{
							ticks: {
								beginAtZero:true
							}
						}]
					},
				}
			});

	var myPieChart = new Chart(pieChart, {
			type: 'pie',
			data: {
				datasets: [{
					data: [50, 35, 15],
					backgroundColor :["#1d7af3","#f3545d","#fdaf4b"],
					borderWidth: 0
				}],
				labels: ['New Visitors', 'Subscribers', 'Active Users'] 
			},
			options : {
				responsive: true, 
				maintainAspectRatio: false,
				legend: {
					position : 'bottom',
					labels : {
						fontColor: 'rgb(154, 154, 154)',
						fontSize: 11,
						usePointStyle : true,
						padding: 20
					}
				},
				pieceLabel: {
					render: 'percentage',
					fontColor: 'white',
					fontSize: 14,
				},
				tooltips: false,
				layout: {
					padding: {
						left: 20,
						right: 20,
						top: 20,
						bottom: 20
					}
				}
			}
		});

	var myRadarChart = new Chart(radarChart, {
			type: 'radar',
			data: {
				labels: ['Running', 'Swimming', 'Eating', 'Cycling', 'Jumping'],
				datasets: [{
					data: [20, 10, 30, 2, 30],
					borderColor: '#1d7af3',
					backgroundColor : 'rgba(29, 122, 243, 0.25)',
					pointBackgroundColor: "#1d7af3",
					pointHoverRadius: 4,
					pointRadius: 3,
					label: 'Team 1'
				}, {
					data: [10, 20, 15, 30, 22],
					borderColor: '#716aca',
					backgroundColor: 'rgba(113, 106, 202, 0.25)',
					pointBackgroundColor: "#716aca",
					pointHoverRadius: 4,
					pointRadius: 3,
					label: 'Team 2'
				},
				]
			},
			options : {
				responsive: true, 
				maintainAspectRatio: false,
				legend : {
					position: 'bottom'
				}
			}
		});

	var myBubbleChart = new Chart(bubbleChart,{
		type: 'bubble',
		data: {
			datasets:[{
				label: "Car", 
				data:[{x:25,y:17,r:25},{x:30,y:25,r:28}, {x:35,y:30,r:8}], 
				backgroundColor:"#716aca"
			},
			{
				label: "Motorcycles", 
				data:[{x:10,y:17,r:20},{x:30,y:10,r:7}, {x:35,y:20,r:10}], 
				backgroundColor:"#1d7af3"
			}],
		},
		options: {
			responsive: true, 
			maintainAspectRatio: false,
			legend: {
				position: 'bottom'
			},
			scales: {
				yAxes: [{
					ticks: {
						beginAtZero:true
					}
				}],
				xAxes: [{
					ticks: {
						beginAtZero:true
					}
				}]
			},
		}
	});


</script>

{% endblock javascripts %}
